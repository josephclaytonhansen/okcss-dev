import express from"express";const app=express();import nunjucks from"nunjucks";import rate_limit from"express-rate-limit";import db from"./src/server/mongo.js";import base_routes from"./src/server/base_routes.js";import page_routes from"./src/server/routes/pageRoutes.js";import post_routes from"./src/server/routes/postRoutes.js";import user_routes from"./src/server/routes/userRoutes.js";import comment_routes from"./src/server/routes/commentRoutes.js";import cors from"cors";import fs from"fs";app.use(express.json()),app.use(express.urlencoded({extended:!1}));const corsOptions={origin:process.env.ORIGIN||"http://localhost:5920",credentials:!0,optionSuccessStatus:200};app.use(cors(corsOptions)),app.options("*",cors(corsOptions)),nunjucks.configure(["src/views","src/includes","src/assets"],{autoescape:!0,express:app,watch:!0});const limiter=rate_limit({windowMs:9e5,max:100,standardHeaders:!0,legacyHeaders:!1});app.use(limiter),app.use("",base_routes),app.use("/page",page_routes),app.use("/post",post_routes),app.use("/user",user_routes),app.use("/comment",comment_routes),app.listen(5920,(()=>{}));