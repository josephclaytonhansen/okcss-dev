import mongoose from"mongoose";const pageSchema=new mongoose.Schema({title:{String:String,index:!0},content:{String:String,index:!0},slug:{String:String,unique:!0},status:{String:String,default:"draft"},author:{type:mongoose.Schema.Types.ObjectId,ref:"User"},views:{Number:Number,default:0}});pageSchema.pre("validate",(function(e){this.slug||(this.slug=this.name.toLowerCase().replace(/ /g,"-")),e()})),pageSchema.post("save",(function(e){this.slug||(this.slug=this.name.toLowerCase().replace(/ /g,"-"),this.save())}));const Page=mongoose.model("Page",pageSchema);Page.createIndexes();export default Page;