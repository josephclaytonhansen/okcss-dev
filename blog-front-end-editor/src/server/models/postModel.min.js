import mongoose from"mongoose";const postSchema=new mongoose.Schema({title:{type:String,index:!0},author:{type:mongoose.Schema.Types.ObjectId,ref:"User"},slug:{type:String,unique:!0},content:{type:String,index:!0},category:[{type:String}],tags:[{type:String}],scheduled_date:{type:Date},status:{type:String,default:"draft"}});postSchema.pre("validate",(function(e){this.slug||(this.slug=this.name.toLowerCase().replace(/ /g,"-")),e()})),postSchema.post("save",(function(e){this.slug||(this.slug=this.name.toLowerCase().replace(/ /g,"-"),this.save())}));const Post=mongoose.model("Post",postSchema);Post.createIndexes();export default Post;