import{savePostCallback}from"/postFunctions.js";function showDropdown(e){let o=e.parentElement.parentElement;loc=o.getBoundingClientRect(),$("#user-dropdown").addClass("hidden"),$("#dropdown-close").removeClass("hidden");let t=document.createElement("div");t.classList.add("dropdown"),t.style.top=loc.bottom-14+"px",t.style.left=loc.left-2+"px",t.style.width=loc.width+2+"px",t.style.position="absolute",t.style.zIndex="800",t.style.backgroundColor="#404040",document.body.appendChild(t);let l=["Account settings","Log out"],a=["/account","/logout"];l.forEach((e=>{let o=document.createElement("div");o.classList.add("dropdown-item"),o.addEventListener("click",(o=>{link=a[l.indexOf(e)],document.location.href=link})),o.innerHTML=e,t.appendChild(o)}))}$("#user-dropdown").on("click",(e=>{e.stopPropagation(),showDropdown(e.target)})),$("#dropdown-close").on("click",(e=>{e.stopPropagation(),$("#dropdown-close").addClass("hidden"),$("#user-dropdown").removeClass("hidden"),$(".dropdown").remove()})),$("#save").on("click",(e=>{let o=new URL(window.location.href),t=o.href.indexOf("post/"),l=o.href.slice(t+5),a=$("#blog-title").val(),s=$("#blog-slug").val(),d=$("#blog-meta-title").val(),n=$("#blog-meta-description").val(),r=$("#blog-meta-keywords").val(),i=$("#blog-status").val(),c=$("#blog-categories").val(),p=$("#blog-tags").val(),u=$("#blog-author").val(),g=sessionStorage.getItem("current-blog-data");$.ajax({url:"/post/update/"+l,type:"POST",data:{post_id:l,title:a,slug:s,metaTitle:d,metaDescription:n,metaKeywords:r,status:i,categories:c,tags:p,author:u,content:g,featuredImage:"",scheduledDate:""},success:()=>savePostCallback(l,g),error:function(e){}})}));