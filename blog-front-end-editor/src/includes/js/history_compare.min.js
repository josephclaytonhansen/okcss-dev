$(".lightbox-modal-close").on("click",(function(){$(".lightbox-modal").addClass("hidden"),$("#editor-grid").css("pointer-events","auto"),$("#editor-grid").css("opacity","1")}));let ll=0,rr=1,mostRecent=null,secondMostRecent=null,left_time_d=null,right_time_d=null;import{savePost}from"./postFunctions.js";function populateHistory(t=0,e=1){let o=$("#history-storage").text();o=o.split(',{"time');let r=-1;o.forEach((t=>{r+=1,t.startsWith('{"time')||(o[r]='{"time'+t)})),o.sort((function(t,e){let o=JSON.parse(t).time;return JSON.parse(e).time-o})),mostRecent=o[t],secondMostRecent=o[e];let s=JSON.parse(secondMostRecent).time;left_time_d=s,s=new Date(s),s=s.toLocaleDateString()+" "+s.toLocaleTimeString();let l=JSON.parse(mostRecent).time;l=new Date(l),l=l.toLocaleDateString()+" "+l.toLocaleTimeString(),$("#left-time").text(s),$("#right-time").text(l);let a=JSON.parse(secondMostRecent).blocks,i="",n="";JSON.parse(mostRecent).blocks.forEach((t=>{if("paragraph"==t.type)i+="<p>"+t.data.text+"</p>";else if("header"==t.type){let e=t.data.level;i+="<h"+e+">"+t.data.text+"</h"+e+">"}else i+="<p>"+t.type+" - "+t.data.text+"</p>"})),a.forEach((t=>{if("paragraph"==t.type)n+="<p>"+t.data.text+"</p>";else if("header"==t.type){let e=t.data.level;n+="<h"+e+">"+t.data.text+"</h"+e+">"}else n+="<p>"+t.type+" - "+t.data.text+"</p>"})),$("#r-right").html(i),$("#r-left").html(n)}populateHistory(ll,rr),$("#left-arrow").on("click",(function(){try{let t=$("#history-count").text().split(" ")[1];ll<t&&($("#left-arrow").removeClass("disabled"),ll+=1,rr+=1,populateHistory(ll,rr)),ll==t&&$("#left-arrow").addClass("disabled"),$("#right-arrow").removeClass("disabled")}catch(t){$("#left-arrow").addClass("disabled")}$("#right-arrow").removeClass("disabled")})),$("#right-arrow").on("click",(function(){try{rr>0&&($("#right-arrow").removeClass("disabled"),ll-=1,rr-=1,populateHistory(ll,rr)),0==rr&&($("#right-arrow").addClass("disabled"),$("#left-arrow").removeClass("disabled"))}catch{$("#right-arrow").addClass("disabled"),$("#left-arrow").removeClass("disabled")}})),$("#restore-right").on("click",(function(){let t=JSON.stringify(right_time_d);mostRecent=JSON.parse(mostRecent),mostRecent.time=t,mostRecent=JSON.stringify(mostRecent),savePost(mostRecent),window.location.reload()})),$("#restore-left").on("click",(function(){let t=JSON.stringify(left_time_d);secondMostRecent=JSON.parse(secondMostRecent),secondMostRecent.time=t,secondMostRecent=JSON.stringify(secondMostRecent),savePost(secondMostRecent),window.location.reload()}));