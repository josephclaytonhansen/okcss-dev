let url=new URL(window.location.href),post_index=url.href.indexOf("post/"),post_id=url.href.slice(post_index+5);$.ajax({method:"GET",url:"/post/id/"+post_id,success:e=>{sessionStorage.setItem("current-blog-data-raw",e.content)}});const editor=new EditorJS({holder:"editorjs",data:{},readOnly:!1,placeholder:"",onChange:()=>{editor.save().then((e=>{parseToHTML(e)}))},onReady:()=>{new Undo({editor:editor}),new DragDrop(editor);let e=JSON.parse(sessionStorage.getItem("current-blog-data-raw")).blocks;e&&e.forEach((e=>{editor.blocks.insert(e.type,e.data)}))},tools:{paragraph:{class:Paragraph,inlineToolbar:!0},checklist:Checklist,list:{class:NestedList,shortcut:"CMD+SHIFT+8",inlineToolbar:!0,config:{defaultStyle:"unordered"}},hyperlink:{class:Hyperlink,shortcut:"CMD+SHIFT+L",config:{validate:!0}},quote:{class:Quote,inlineToolbar:!0,shortcut:"CMD+SHIFT+O",config:{quotePlaceholder:"Enter a quote",captionPlaceholder:"Quote's author"}},header:{class:Header,inlineToolbar:!0,config:{placeholder:"Enter a header",levels:[1,2,3,4,5],defaultLevel:2,defaultAlignment:"left"}},toggle:{class:ToggleBlock,shortcut:"CMD+SHIFT+Y",inlineToolbar:!0},image:SimpleImage,table:{class:Table,inlineToolbar:!0},embed:Embed,AnyButton:{class:AnyButton,inlineToolbar:!1,shortcut:"CMD+J"}}}),edjsParser=edjsHTML();function parseToHTML(e){let t=edjsParser.parse(e),o=JSON.stringify(e);t=t.join(""),sessionStorage.setItem("current-blog-data",t),sessionStorage.setItem("current-blog-data-raw",o);let s=[];for(let t=0;t<e.blocks.length;t++)s.push(e.blocks[t].data.text);s=s.join(" "),$("#word-count").text(s.split(" ").length+" words")}let sidebar_open=!0;const sidebar=$(".blog-editor-sidebar"),sidebar_button_open=document.querySelector("#sidebar-open").querySelector("span"),sidebar_button_close=document.querySelector("#sidebar-close").querySelector("span"),sidebar_open_div=document.querySelector("#sidebar-open"),sidebar_close_div=document.querySelector("#sidebar-close");sidebar_button_open.addEventListener("click",(()=>{sidebar_open_div.classList.add("hidden"),sidebar_close_div.classList.remove("hidden"),sidebar_open=!0,$("#editor-grid").css("grid-template-columns","80vw 20vw"),$("#editor-left").css("margin-right","2vw")})),sidebar_button_close.addEventListener("click",(()=>{sidebar_open_div.classList.remove("hidden"),sidebar_close_div.classList.add("hidden"),sidebar_open=!1,$("#editor-grid").css("grid-template-columns","100vw 0vw"),$("#editor-left").css("margin-right","2rem")})),$("#gallery-expand").on("click",(()=>{$(".expand").toggleClass("expanded"),$(".expand").toggleClass("hidden"),$(".expand").hasClass("expanded")?$("#editorjs").css("pointer-events","none"):$("#editorjs").css("pointer-events","auto")}));