import{savePostCallback,savePost,publishPost,unpublishPost,schedulePost}from"/postFunctions.js";function showDropdown(e,o,t,d,n,s,l,c){let i=e.parentElement.parentElement.getBoundingClientRect();$(o).addClass("hidden"),$(t).removeClass("hidden");let a=document.createElement("div");a.classList.add("dropdown"),a.id=c,a.style.top=i.bottom-l+"px",a.style.left=i.left-2+"px",a.style.width=i.width+s+"px",a.style.position="absolute",a.style.zIndex="800",a.style.backgroundColor="#404040",document.body.appendChild(a),"account"==c?d.forEach((e=>{let o=document.createElement("div");o.classList.add("dropdown-item"),o.addEventListener("click",(o=>{let t=n[d.indexOf(e)];t.startsWith("/")?document.location.href=t:window[t]()})),o.innerHTML=e,a.appendChild(o)})):scheduleDropdown(a)}function scheduleDropdown(e){let o=e,t=document.createElement("input");t.style.width="100%",t.id="calendar",t.type="date";let d=document.createElement("button");d.id="submit",d.onclick=e=>{schedulePost(null,t.value)},d.innerHTML="Submit",d.classList.add("ocean"),d.classList.add("fullwidth"),o.appendChild(t),o.appendChild(d)}$("#user-dropdown").on("click",(e=>{e.stopPropagation(),showDropdown(e.target,"#user-dropdown","#dropdown-close",["Account settings","Log out"],["/account","/logout"],2,14,"account")})),$("#dropdown-close").on("click",(e=>{e.stopPropagation(),$("#dropdown-close").addClass("hidden"),$("#user-dropdown").removeClass("hidden"),$(".dropdown").remove()})),$("#save").on("click",(e=>{savePost(sessionStorage.getItem("current-blog-data-raw"))})),$("#publish").on("click",(e=>{publishPost()})),$("#unpublish").on("click",(e=>{unpublishPost()})),$("#schedule").on("click",(e=>{e.stopPropagation(),0==$("#schedule-dropdown").length?showDropdown(e.target,"#schedule","#schedule",[],[],100,0,"schedule-dropdown"):$("#schedule-dropdown").remove()}));