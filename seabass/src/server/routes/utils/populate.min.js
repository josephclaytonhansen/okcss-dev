import axios from"axios";import User from"../../models/userModel.min.js";import Post from"../../models/postModel.min.js";import fs from"fs";const populate=async(s,e)=>{let o=s.session.passport.user,a=null;if(s.session.user)a=s.session.user;else{let e=await User.findById(o).then((s=>s));s.session.user=e}let t=null,i=null;s.session.categories?(t=s.session.categories,i=t.map((s=>({name:s.name,id:s._id})))):(t=await axios.get("http://localhost:5920/category/"),s.session.categories=t.data,i=t.data.map((s=>({name:s.name,id:s._id}))));let l=null;s.session.posts?l=s.session.posts:(l=await axios.get("http://localhost:5920/post/"),s.session.posts=l.data);let n=null;s.session.pages?n=s.session.pages:(n=await axios.get("http://localhost:5920/page/"),s.session.pages=n.data);let m=null;s.session.comments?m=s.session.comments:(m=await axios.get("http://localhost:5920/comment/"),s.session.comments=m.data);let p=null,r=null;return s.session.users?(p=s.session.users,r=p.map((s=>({name:s.display_name,id:s._id})))):(p=await axios.get("http://localhost:5920/user/"),s.session.users=p.data,r=p.data.map((s=>({name:s.display_name,id:s._id})))),{user:a,categories:t,all_categories:i,posts:l,pages:n,comments:m,users:p,all_authors:r}};export default populate;