import mongoose from"mongoose";const postSchema=new mongoose.Schema({title:{type:String,index:!0},meta_title:{type:String,index:!0},meta_description:{type:String,index:!0},meta_keywords:[{type:String}],author:{type:mongoose.Schema.Types.ObjectId,ref:"User"},slug:{type:String,unique:!0},content:{type:String,index:!0},categories:[String],tags:[{type:String}],scheduled_date:{type:Date},status:{type:String,default:"draft"},featured_image:{type:String},history:[{type:String}]},{timestamps:!0});postSchema.pre("validate",(function(e){this.slug||(this.slug=this.name.toLowerCase().replace(/ /g,"-")),e()})),postSchema.pre("save",(function(e){this.slug||(this.slug=this.name.toLowerCase().replace(/ /g,"-"))})),postSchema.post("update",(function(e){this.slug||(this.slug=this.name.toLowerCase().replace(/ /g,"-")),e()})),postSchema.pre("update",(function(e){this.slug||(this.slug=this.name.toLowerCase().replace(/ /g,"-")),e()}));const Post=mongoose.model("Post",postSchema);Post.createIndexes();export default Post;